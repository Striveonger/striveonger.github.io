(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{614:function(s,a,t){s.exports=t.p+"assets/img/image-20210804142011045.2ff819ea.png"},615:function(s,a,t){s.exports=t.p+"assets/img/image-20210620094821849.336c98a5.png"},616:function(s,a,t){s.exports=t.p+"assets/img/image-20210621220339418.3dc1d044.png"},617:function(s,a,t){s.exports=t.p+"assets/img/image-20210621214655982.6cec2c39.png"},618:function(s,a,t){s.exports=t.p+"assets/img/image-20210622213936622.e9426c9a.png"},619:function(s,a,t){s.exports=t.p+"assets/img/image-20210622220029699.909c80bc.png"},620:function(s,a,t){s.exports=t.p+"assets/img/image-20210622220158920.88c87229.png"},621:function(s,a,t){s.exports=t.p+"assets/img/image-20210622223107546.7da0d4c2.png"},622:function(s,a,t){s.exports=t.p+"assets/img/image-20210624080741402.b4b5e238.png"},623:function(s,a,t){s.exports=t.p+"assets/img/image-20210624222656288.7e5b3b58.png"},624:function(s,a,t){s.exports=t.p+"assets/img/image-20210626214238527.ffa8c8a9.png"},625:function(s,a,t){s.exports=t.p+"assets/img/image-20210626225528624.16d1a60d.png"},626:function(s,a,t){s.exports=t.p+"assets/img/image-20210627150958785.747a4e49.png"},627:function(s,a,t){s.exports=t.p+"assets/img/image-20210627152849953.fbd9c300.png"},628:function(s,a,t){s.exports=t.p+"assets/img/image-20210627154835604.4736dec4.png"},629:function(s,a,t){s.exports=t.p+"assets/img/image-20210627155154382.ffade744.png"},630:function(s,a,t){s.exports=t.p+"assets/img/image-20210627155510125.12662894.png"},631:function(s,a,t){s.exports=t.p+"assets/img/image-20210627155854472.ca89959f.png"},632:function(s,a,t){s.exports=t.p+"assets/img/image-20210627160650093.6a46c6f1.png"},633:function(s,a,t){s.exports=t.p+"assets/img/image-20210627162233792.fe81e4de.png"},634:function(s,a,t){s.exports=t.p+"assets/img/image-20210627164244808.3c9941df.png"},872:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("Docker 入门笔记")]),s._v(" "),n("blockquote",[n("p",[s._v("单独的容器, 是没有意义的....真正有意义的是"),n("strong",[s._v("容器扩缩容")]),s._v("与"),n("strong",[s._v("容器编排")]),s._v("...但是单独的容器, 又是基础.....所以都要好好学呀.")])]),s._v(" "),n("h2",{attrs:{id:"docker-是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-是什么"}},[s._v("#")]),s._v(" Docker 是什么?")]),s._v(" "),n("p",[s._v("将应用和环境打包成一个镜像.")]),s._v(" "),n("p",[s._v("数据呢?")]),s._v(" "),n("h2",{attrs:{id:"docker-上下文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-上下文"}},[s._v("#")]),s._v(" Docker 上下文")]),s._v(" "),n("p",[s._v("可以切换"),n("code",[s._v("Docker Client")]),s._v("的连接环境. 默认使用本地的"),n("code",[s._v("docker-ce")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(614),alt:"image-20210804142011045"}})]),s._v(" "),n("blockquote",[n("p",[s._v("文档地址: https://docs.docker.com/engine/reference/commandline/context/")])]),s._v(" "),n("h3",{attrs:{id:"example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[s._v("#")]),s._v(" Example")]),s._v(" "),n("h4",{attrs:{id:"创建上下文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建上下文"}},[s._v("#")]),s._v(" 创建上下文")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker context create remote --docker "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host=ssh://root@192.168.10.11"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 使用时, 要用 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".10.11 服务器的免密.\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 打开上下文环境")]),s._v("\n\n```shell\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker context "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nNAME             TYPE    DESCRIPTION    DOCKER ENDPOINT                             KUBERNETES ENDPOINT   ORCHESTRATOR\ndefault *        moby                   npipe:////./pipe/docker_engine                                    swarm\ndesktop-linux    moby                   npipe:////./pipe/dockerDesktopLinuxEngine\nremote           moby                   ssh://root@192.168.10.11\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker context use remote\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker context "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nNAME             TYPE    DESCRIPTION    DOCKER ENDPOINT                             KUBERNETES ENDPOINT   ORCHESTRATOR\ndefault          moby                   npipe:////./pipe/docker_engine                                    swarm\ndesktop-linux    moby                   npipe:////./pipe/dockerDesktopLinuxEngine\nremote *         moby                   ssh://root@192.168.10.11\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("blockquote",[n("p",[s._v("这样本地,  就可以使用服务器资源了….嘿嘿")]),s._v(" "),n("p",[s._v("参考: https://www.docker.com/blog/how-to-deploy-on-remote-docker-hosts-with-docker-compose/")])]),s._v(" "),n("h2",{attrs:{id:"容器数据卷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器数据卷"}},[s._v("#")]),s._v(" 容器数据卷")]),s._v(" "),n("p",[s._v("数据? 如果数据也在容器中, 那么我们容器删除时, 数据也就会丢失. 需求: ==数据可以持久化==")]),s._v(" "),n("p",[s._v("比如: MySQL容器, 可以将数据可以存储在本地.")]),s._v(" "),n("p",[s._v("容器间, 也可以有一个数据共享的技术, Docker容器中产生的数据, 同步到本地.")]),s._v(" "),n("p",[s._v("这就是卷技术.")]),s._v(" "),n("p",[n("img",{attrs:{src:t(615),alt:"image-20210620094821849"}})]),s._v(" "),n("blockquote",[n("p",[s._v("数据卷的出现, 是为了解决==容器的持久化与同步操作, 和容器间的数据共享==")])]),s._v(" "),n("h3",{attrs:{id:"指定路径挂载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指定路径挂载"}},[s._v("#")]),s._v(" 指定路径挂载")]),s._v(" "),n("h4",{attrs:{id:"方法一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方法一"}},[s._v("#")]),s._v(" 方法一")]),s._v(" "),n("blockquote",[n("p",[s._v("直接用命令来挂载 "),n("code",[s._v("-v")])])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 宿主机")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -ti -v ~/development/workspace/docker/volume:/home/test centos:7 /bin/bash\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进到容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@224e4db615b8 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd home/test/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@224e4db615b8 test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@224e4db615b8 test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch test.md")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@224e4db615b8 test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo # hello > test.md")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在宿主机, 打开文件")]),s._v("\n$ ~/development/workspace/docker/volume "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" test.md\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hello")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看卷信息(精简过哦~)")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker inspect 224e4db615b8\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"224e4db615b86f001970c434a4c44984f354d947d1a420899da658e446803716"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-20T03:47:37.816380267Z"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Path"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Args"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载 卷")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mounts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bind"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 宿主机地址")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Source"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~/development/workspace/docker/volume"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器内的地址")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Destination"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/test"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mode"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RW"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Propagation"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rprivate"')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("h4",{attrs:{id:"安装mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[s._v("#")]),s._v(" 安装MySQL")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d 后台启动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -p 端口映射")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -v 挂载数据卷")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -e 配置环境变量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --name 定义容器名")]),s._v("\n\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -d -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3310")]),s._v(":3306 -v ~/development/workspace/docker/volume/mysql/conf:/etc/mysql/conf.d -v ~/development/workspace/docker/volume/mysql/data:/var/lib/mysql -e "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" --name mysql01  mysql:8\n9b3a8b857f4919de64a336bb4cc359f9bb08f1a51bd880ab75062759c8c228d0\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"匿名挂载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#匿名挂载"}},[s._v("#")]),s._v(" 匿名挂载")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -d -P --name nginx01 -v /etc/nginx nginx\n4aec1017ce2c8d585134525cf1d44af1f9a3a5c01401da3903e7efa1df068296\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会随机生成一个卷名")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker volume "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nDRIVER    VOLUME NAME\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     1e908ea33ae1c6112ee8d46058bb6a27d57e45bde720bd8f7face96858eea785\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"具名挂载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#具名挂载"}},[s._v("#")]),s._v(" 具名挂载")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -d -P --name nginx02 -v nginx_volume:/etc/nginx nginx\n13ff54c11d7994c420c8345de51fbfba9c92e0045a1a3c419d9481361680ad91\n\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker volume "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nDRIVER    VOLUME NAME\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     1e908ea33ae1c6112ee8d46058bb6a27d57e45bde720bd8f7face96858eea785\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     nginx_volume\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"查看卷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看卷"}},[s._v("#")]),s._v(" 查看卷")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker volume "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nDRIVER    VOLUME NAME\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     1e908ea33ae1c6112ee8d46058bb6a27d57e45bde720bd8f7face96858eea785\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     nginx_volume\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看数据卷的详细信息")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker volume inspect 1e908ea33ae1c6112ee8d46058bb6a27d57e45bde720bd8f7face96858eea785\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CreatedAt"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-20T05:29:17Z"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mountpoint"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/volumes/1e908ea33ae1c6112ee8d46058bb6a27d57e45bde720bd8f7face96858eea785/_data"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1e908ea33ae1c6112ee8d46058bb6a27d57e45bde720bd8f7face96858eea785"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker volume inspect nginx_volume\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CreatedAt"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-20T06:03:53Z"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mountpoint"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/volumes/nginx_volume/_data"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx_volume"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h3",{attrs:{id:"扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[s._v("#")]),s._v(" 扩展")]),s._v(" "),n("h4",{attrs:{id:"区分上述的三种数据卷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#区分上述的三种数据卷"}},[s._v("#")]),s._v(" 区分上述的三种数据卷")]),s._v(" "),n("ul",[n("li",[s._v("指定路径挂载的数据卷: -v <宿主机的绝对路径>:<容器的绝对路径>")]),s._v(" "),n("li",[s._v("具名挂载: -v <数据卷名>:<容器的绝对路径>")]),s._v(" "),n("li",[s._v("匿名挂载: -v <容器的绝对路径>")])]),s._v(" "),n("h4",{attrs:{id:"设置数据卷在容器中的权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置数据卷在容器中的权限"}},[s._v("#")]),s._v(" 设置数据卷在容器中的权限")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ro   read only")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rw   read write")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -d -P --name nginx02 -v nginx_volume:/etc/nginx:ro nginx\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -d -P --name nginx02 -v nginx_volume:/etc/nginx:rw nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h4",{attrs:{id:"利用dockerfile挂载数据卷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#利用dockerfile挂载数据卷"}},[s._v("#")]),s._v(" 利用Dockerfile挂载数据卷")]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("7\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir /workspace\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" /workspace/greeing\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/workspace"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建我们自己的镜像")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker build -f Dockerfile -t striveonger/linux:1.0 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Building "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".6s "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" FINISHED\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load build definition from Dockerfile                                                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring dockerfile: 139B                                                                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load .dockerignore                                                                   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring context: 2B                                                                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load metadata "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" docker.io/library/centos:7                                         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" FROM docker.io/library/centos:7                                                           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" RUN "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /workspace                                                                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".6s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" RUN "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /workspace/greeing                                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".5s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exporting to image                                                                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exporting layers                                                                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" writing image sha256:a49198bdfaa0c3f873f07211560afeca464b128957ca5935c9b25ef8855b8fc4        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" naming to docker.io/striveonger/linux:1.0                                                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n\nUse "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker scan'")]),s._v(" to run Snyk tests against images to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" vulnerabilities and learn how to fix them\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看我们刚刚创建的镜像")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker images\nREPOSITORY                TAG       IMAGE ID         CREATED            SIZE\nstriveonger/linux         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("       a49198bdfaa0     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago      204MB\nnginx                     latest    d1a364dc548d     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago        133MB\nmysql                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("         c0cdc95609f1     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago        556MB\ncentos                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("         8652b9f0cb4c     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago       204MB\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动我们自己镜像")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -it striveonger/linux:1.0 /bin/bash\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@a76a5507c11d /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n-rw-r--r--   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12114")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" anaconda-post.log\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" bin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/bin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("360")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 08:01 dev\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 08:01 etc\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" home\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib64 -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib64\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" media\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" mnt\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" opt\ndr-xr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("186")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 08:01 proc\ndr-xr-x---   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" root\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" run\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" sbin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/sbin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" srv\ndr-xr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 08:01 sys\ndrwxrwxrwt   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" tmp\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" usr\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" var\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" 08:01 workspace\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看匿名数据卷")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker inspect "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -aq"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"62baaf2aad4ed6c2a9d9b94e88510448afed12aa01732b4fed2fc6d1a2395501"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-20T08:11:49.377647179Z"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Path"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Args"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"State"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Status"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"running"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Running"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Paused"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Restarting"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OOMKilled"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Dead"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Pid"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5839")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExitCode"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StartedAt"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-20T08:11:49.827678606Z"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"FinishedAt"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0001-01-01T00:00:00Z"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:a49198bdfaa0c3f873f07211560afeca464b128957ca5935c9b25ef8855b8fc4"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ResolvConfPath"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/62baaf2aad4ed6c2a9d9b94e88510448afed12aa01732b4fed2fc6d1a2395501/resolv.conf"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostnamePath"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/62baaf2aad4ed6c2a9d9b94e88510448afed12aa01732b4fed2fc6d1a2395501/hostname"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostsPath"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/62baaf2aad4ed6c2a9d9b94e88510448afed12aa01732b4fed2fc6d1a2395501/hosts"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LogPath"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/62baaf2aad4ed6c2a9d9b94e88510448afed12aa01732b4fed2fc6d1a2395501/62baaf2aad4ed6c2a9d9b94e88510448afed12aa01732b4fed2fc6d1a2395501-json.log"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mounts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"volume"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5bf75faa4444230c0dd6d4a6435dd91081f982626767e390fa1194826bc82dfe"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Source"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/volumes/5bf75faa4444230c0dd6d4a6435dd91081f982626767e390fa1194826bc82dfe/_data"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Destination"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/workspace"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mode"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RW"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Propagation"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br")])]),n("h4",{attrs:{id:"容器间共享数据卷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器间共享数据卷"}},[s._v("#")]),s._v(" 容器间共享数据卷")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器1-客户端")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -it --name linux01 striveonger/linux:1.0 /bin/bash\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器2-客户端")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -it --name linux02 --volumes-from linux01 striveonger/linux:1.0 /bin/bash\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@926271127b05 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n-rw-r--r--   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12114")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" anaconda-post.log\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" bin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/bin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("360")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":35 dev\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":35 etc\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" home\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib64 -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib64\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" media\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" mnt\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" opt\ndr-xr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":35 proc\ndr-xr-x---   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" root\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" run\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" sbin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/sbin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" srv\ndr-xr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":35 sys\ndrwxrwxrwt   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" tmp\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" usr\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" var\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":32 workspace\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@926271127b05 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat workspace/greeing")]),s._v("\nHello World\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#----------------------------下一波操作-----------------------------------")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器1-客户端: 写入文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@e9c107cefc2b /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "Linux01 Write haha" >> /workspace/greeing')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@e9c107cefc2b /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /workspace/greeing")]),s._v("\nHello World\nLinux01 Write haha\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器2-客户端: 读取文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@926271127b05 /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat workspace/greeing")]),s._v("\nHello World\nLinux01 Write haha\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("blockquote",[n("p",[s._v("--volumes-from linux01 针对于, linux02来说, linux01 是它的数据卷")])]),s._v(" "),n("h2",{attrs:{id:"dockerfile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),n("p",[s._v("Dockerfile 是用来构建Docker镜像的命令脚本文件.")]),s._v(" "),n("h3",{attrs:{id:"dockerfile-介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-介绍"}},[s._v("#")]),s._v(" Dockerfile 介绍")]),s._v(" "),n("p",[s._v("构建步骤:")]),s._v(" "),n("ol",[n("li",[s._v("编写一下Dockerfile文件")]),s._v(" "),n("li",[s._v("docker build 构建成一个镜像")]),s._v(" "),n("li",[s._v("docker run 运行自己的镜像")]),s._v(" "),n("li",[s._v("docker push 发布自己的镜像(Docker Hub, 阿里云)")])]),s._v(" "),n("p",[s._v("There are a thousand Hamlets in a thousand people's eyes. 通常我们会根据自己的需求, 来构建我们自己的镜像.")]),s._v(" "),n("h3",{attrs:{id:"dockerfile-构建过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-构建过程"}},[s._v("#")]),s._v(" Dockerfile 构建过程")]),s._v(" "),n("h4",{attrs:{id:"基础知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[s._v("#")]),s._v(" 基础知识")]),s._v(" "),n("ol",[n("li",[s._v("每个保留关键字(指令), 都必须是大写的")]),s._v(" "),n("li",[s._v("从上到下顺序执行")]),s._v(" "),n("li",[s._v("# 表示注视")]),s._v(" "),n("li",[s._v("每一个指令, 都会创建一个新的镜像层, 并提交")])]),s._v(" "),n("blockquote",[n("p",[s._v("Dockerfile 是面向开发的. 我们以后要发布项目, 就需要编写Dockerfile文件.")]),s._v(" "),n("p",[s._v("Docker镜像, 逐渐成为企业的交付标准")]),s._v(" "),n("p",[s._v("现在, 大公司...Docker 是做为交付标准存在的.")]),s._v(" "),n("p",[s._v("原来交付 jar包...现在就有交付Docker镜")])]),s._v(" "),n("h4",{attrs:{id:"dockerfile-相关指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-相关指令"}},[s._v("#")]),s._v(" Dockerfile 相关指令")]),s._v(" "),n("p",[n("img",{attrs:{src:t(616),alt:"image-20210621220339418"}})]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("FROM")]),s._v("  ==>  基础镜像, 一般会用centos")]),s._v(" "),n("li",[n("strong",[s._v("MAINTAINER")]),s._v("  ==>  镜像的作者, 一般是 姓名 + 邮箱")]),s._v(" "),n("li",[n("strong",[s._v("RUN")]),s._v("  ==>  镜像构建时需要运行的命令, 一般是运行一些安装所需软件的命令")]),s._v(" "),n("li",[n("strong",[s._v("ADD")]),s._v("  ==>  添加一些外部文件, 压缩包会自动解压哦~")]),s._v(" "),n("li",[n("strong",[s._v("WORKDIR")]),s._v("  ==> 设置镜像的工作目录")]),s._v(" "),n("li",[n("strong",[s._v("VOLUME")]),s._v("  ==>  设置容器的挂载卷")]),s._v(" "),n("li",[n("strong",[s._v("EXPOSE")]),s._v("  ==>  设置容器对外暴露的端口")]),s._v(" "),n("li",[n("strong",[s._v("CMD")]),s._v("  ==>  指定容器启动时要执行的命令, 只有最后一个会生效, 可以被替代")]),s._v(" "),n("li",[n("strong",[s._v("ENTRYPOINT")]),s._v("  ==>  指定容器启动时要执行的命令, 可以追加命令")]),s._v(" "),n("li",[n("strong",[s._v("ONBUILD")]),s._v("  ==>  当构建一个被继承的Dockerfile时, 就是运行ONBUILD中的命令(触发指令)")]),s._v(" "),n("li",[n("strong",[s._v("COPY")]),s._v("  ==> 类似 ADD 将文件复制到镜像中")]),s._v(" "),n("li",[n("strong",[s._v("ENV")]),s._v("  ==>  构建时, 设置环境变量")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(617),alt:"image-20210621214655982"}})]),s._v(" "),n("blockquote",[n("p",[s._v("https://docs.docker.com/engine/reference/builder/")])]),s._v(" "),n("h4",{attrs:{id:"创建自己的centos"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建自己的centos"}},[s._v("#")]),s._v(" 创建自己的CentOS")]),s._v(" "),n("ol",[n("li",[s._v("编写Dockerfile")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("7\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MAINTAINER Mr.Lee<striveonger@163.com>")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" MYPATH=/usr/local\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" $MYPATH\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum install "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("y vim net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tools\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CMD 只会执行最后的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" echo $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("MYPATH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" echo "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--------END--------"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" /bin/bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("构建Docker镜像")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker build -f Dockerfile -t linux:0.1 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Building "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("689")]),s._v(".7s "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" FINISHED                                                                                                                                                                                                                                                                                           \n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load build definition from Dockerfile                                                  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring dockerfile: 254B                                                                  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load .dockerignore                                                                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring context: 2B                                                                       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load metadata "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" docker.io/library/centos:7                                           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CACHED "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" FROM docker.io/library/centos:7                                                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" WORKDIR /usr/local                                                                          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" RUN yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" net-tools                                                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("686")]),s._v(".2s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exporting to image                                                                                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".2s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exporting layers                                                                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".2s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" writing image sha256:99e4ba0a18dc03f2da04c5717ba203fd71864cb372f3cc8914910fa3306bec42          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s \n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" naming to docker.io/library/linux:0.1                                                          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s \n                                                                                                                                                                                                                                                                                                                             \nUse "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker scan'")]),s._v(" to run Snyk tests against images to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" vulnerabilities and learn how to fix them      \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("启动Docker镜像")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v(" $ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker images\nREPOSITORY                       TAG       IMAGE ID       CREATED        SIZE\nlinux                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("       99e4ba0a18dc   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" hours ago    383MB\nstriveonger/linux                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("       a49198bdfaa0   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(" hours ago   204MB\nnginx                            latest    d1a364dc548d   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago    133MB\nmysql                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("         c0cdc95609f1   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago    556MB\ncentos                           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("         8652b9f0cb4c   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago   204MB\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -ti --rm 99e4ba0a18dc         \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@21c0a62abd9a local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/usr/local\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@21c0a62abd9a local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo $MYPATH")]),s._v("\n/usr/local\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"cmd与entrypoint的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cmd与entrypoint的区别"}},[s._v("#")]),s._v(" CMD与ENTRYPOINT的区别")]),s._v(" "),n("h5",{attrs:{id:"cmd"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cmd"}},[s._v("#")]),s._v(" CMD")]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("7\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir /hello"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-a"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -ti --rm linux:0.1            \n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("   .dockerenv         bin  etc   lib    media  opt   root  sbin  sys  usr\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("  anaconda-post.log  dev  home  lib64  mnt    proc  run   srv   tmp  var\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CMD 不可以追加参数")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  docker run -ti --rm linux:0.1 -l         \ndocker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-l"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" executable "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" not found "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" unknown.\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CMD 可以替换整个命令")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -ti --rm linux:0.1 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -la\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 .dockerenv\n-rw-r--r--   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12114")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" anaconda-post.log\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" bin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/bin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("360")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 dev\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 etc\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" home\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib64 -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib64\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" media\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" mnt\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" opt\ndr-xr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("169")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 proc\ndr-xr-x---   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" root\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" run\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" sbin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/sbin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" srv\ndr-xr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 sys\ndrwxrwxrwt   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" tmp\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" usr\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" var\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("h5",{attrs:{id:"entrypoint"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint"}},[s._v("#")]),s._v(" ENTRYPOINT")]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("7\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这货 也是不会执行的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir /hello"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-a"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -ti --rm linux:0.1            \n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("   .dockerenv         bin  etc   lib    media  opt   root  sbin  sys  usr\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("  anaconda-post.log  dev  home  lib64  mnt    proc  run   srv   tmp  var\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ENTRYPOINT 是可以直接追加的")]),s._v("\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -ti --rm linux:0.1 -l\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 .dockerenv\n-rw-r--r--   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12114")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" anaconda-post.log\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" bin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/bin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("360")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 dev\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 etc\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" home\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" lib64 -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/lib64\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" media\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" mnt\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" opt\ndr-xr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("169")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 proc\ndr-xr-x---   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" root\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" run\nlrwxrwxrwx   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" sbin -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/sbin\ndrwxr-xr-x   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" srv\ndr-xr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":50 sys\ndrwxrwxrwt   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" tmp\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" usr\ndrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Nov "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" var\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h4",{attrs:{id:"制作-tomcat-镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#制作-tomcat-镜像"}},[s._v("#")]),s._v(" 制作 Tomcat 镜像")]),s._v(" "),n("ol",[n("li",[s._v("准备文件: "),n("code",[s._v("JDK")]),s._v(" 和 "),n("code",[s._v("Tomcat")]),s._v(" 的安装包")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(618),alt:"image-20210622213936622"}})]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("编写Dockerfile文件")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("7\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" Mr.Lee<striveonger@163.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" README.MD /usr/local/README.MD\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" jdk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("8u291"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("linux"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("x64.tar.gz /usr/local/\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("8.5.68.tar.gz /usr/local/\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RUN yum install -y vim net-tools")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8080\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JAVA_HOME /usr/local/jdk1.8.0_291\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" CLASS_PATH .\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" CATALINA_HOME /usr/local/apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("8.5.68\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" CATALINA_BASE /usr/local/apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("8.5.68\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" PATH $PATH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("$JAVA_HOME/bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("$CATALINA_HOME/bin\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" MYPATH /usr/local\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" $MYPATH\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" $CATALINA_HOME/bin/startup.sh && tail "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("f $CATALINA_HOME/logs/catalina.out\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker build -t striveonger/tomcat:1.0 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Building "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".5s "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("/10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" FINISHED\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load build definition from Dockerfile                                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring dockerfile: 595B                                                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load .dockerignore                                                                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring context: 2B                                                                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load metadata "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" docker.io/library/centos:7                                          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" FROM docker.io/library/centos:7                                                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("internal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" load build context                                                                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transferring context: 219B                                                                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CACHED "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" COPY README.MD /usr/local/README.MD                                                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CACHED "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ADD jdk-8u291-linux-x64.tar.gz /usr/local/                                          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CACHED "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ADD apache-tomcat-8.5.68.tar.gz /usr/local/                                         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("/5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" WORKDIR /usr/local                                                                         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exporting to image                                                                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exporting layers                                                                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".1s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" writing image sha256:5fab5f22edd710b3fc7d780f52ce404845a38dc4e412d9d34d6c3690c707a134         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" naming to docker.io/striveonger/tomcat:1.0                                                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".0s\n\nUse "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker scan'")]),s._v(" to run Snyk tests against images to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" vulnerabilities and learn how to fix them\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("启动容器")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker images\nREPOSITORY               TAG         IMAGE ID          CREATED            SIZE\nstriveonger/tomcat       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("         5fab5f22edd7      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago      578MB\nstriveonger/linux        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("         a49198bdfaa0      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days ago         204MB\nnginx                    latest      d1a364dc548d      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago        133MB\nmysql                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("           c0cdc95609f1      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago        556MB\nlinux                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("         5f78411ae0c1      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago       204MB\ncentos                   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("           8652b9f0cb4c      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago       204MB\n\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker run -d --name tomcat01 -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 -v ~/development/workspace/docker/volume/tomcat/test:/usr/local/apache-tomcat-8.5.68/webapps/test striveonger/tomcat:1.0\nb1945d74751ca79e12f7b23eb00c6cacf40f0325f7cbdd81c23585c0f37b2bd3\n$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID   IMAGE                    COMMAND                  CREATED          STATUS          PORTS                                       NAMES\nb1945d74751c   striveonger/tomcat:1.0   "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"/bin/sh -c '"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CATALI")]),s._v('…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" seconds ago   Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" seconds   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8080-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp, :::8080-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat01\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("测试Tomcat")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(619),alt:"image-20210622220029699"}})]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<!")]),n("span",{pre:!0,attrs:{class:"token doctype-tag"}},[s._v("DOCTYPE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token name"}},[s._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("'")]),s._v("utf-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("'")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("Hello"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("Hello World"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("img",{attrs:{src:t(620),alt:"image-20210622220158920"}})]),s._v(" "),n("h3",{attrs:{id:"发布镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布镜像"}},[s._v("#")]),s._v(" 发布镜像")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker push striveonger/tomcat:1.0\nThe push refers to repository "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("docker.io/striveonger/tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n5f70bf18a086: Pushed\n976dc1e180ca: Pushing "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                               "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".884MB/14.73MB\n35604d5095f0: Pushing "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".867MB/359.6MB\n83b0257f8c91: Pushed\n174f56854903: Mounted from library/centos\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到发布镜像时, 也是分层发布的哦~")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("p",[n("img",{attrs:{src:t(621),alt:"image-20210622223107546"}})]),s._v(" "),n("h2",{attrs:{id:"docker-网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-网络"}},[s._v("#")]),s._v(" Docker 网络")]),s._v(" "),n("h3",{attrs:{id:"理解docker0网卡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#理解docker0网卡"}},[s._v("#")]),s._v(" 理解docker0网卡")]),s._v(" "),n("ol",[n("li",[s._v("初始化环境")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY          TAG       IMAGE ID       CREATED          SIZE\nstriveonger/linux   latest    c5bc257a1eb9   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" minutes ago   757MB\ncentos              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("         8652b9f0cb4c   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago     204MB\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("查看宿主机网络环境")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip addr")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": ens33: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc pfifo_fast state UP group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/ether 00:50:56:2a:86:16 brd ff:ff:ff:ff:ff:ff\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".144.104/24 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".144.255 scope global noprefixroute ens33\n       valid_lft forever preferred_lft forever\n    inet6 fd15:4ba5:5a2b:1008:fa0d:ec62:bc43:7b6c/64 scope global noprefixroute dynamic\n       valid_lft 2591895sec preferred_lft 604695sec\n    inet6 fe80::df3a:bcdd:727d:3ce5/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" noprefixroute\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": docker0: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue state UP group default\n    link/ether 02:42:93:d6:b6:11 brd ff:ff:ff:ff:ff:ff\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1/16 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:93ff:fed6:b611/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n       valid_lft forever preferred_lft forever\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到有三块网卡...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lo       本机地址                127.0.0.1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ens33    虚拟机分配地址           10.13.144.10")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker0  Docker分配地址          172.17.0.1    (重点, 做为一个路由器功能的存在)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("启动容器观察")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 启动tomcat01 容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat01 -P striveonger/linux")]),s._v("\ne80b95a2390a8a4f825f892dc6a11157fa1d599b8eab6f57e2c24ce594e3df05\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 查看容器信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE               COMMAND                  CREATED          STATUS          PORTS                                         NAMES\ne80b95a2390a   striveonger/linux   "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"/bin/sh -c '"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CATALI")]),s._v('…"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" seconds ago   Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" seconds   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:49155-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp, :::49155-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat01\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 查看容器内的网卡信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat01 ip addr")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(": eth0@if11: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue state UP group default\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2/16 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4. 尝试在宿主机 ping tomcat01容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping 172.17.0.2")]),s._v("\nPING "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.285")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.060")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.060")]),s._v(" ms\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5. 再次查看宿主机的网卡信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip addr")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": ens33: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc pfifo_fast state UP group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/ether 00:50:56:2a:86:16 brd ff:ff:ff:ff:ff:ff\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".144.104/24 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".144.255 scope global noprefixroute ens33\n       valid_lft forever preferred_lft forever\n    inet6 fd15:4ba5:5a2b:1008:fa0d:ec62:bc43:7b6c/64 scope global noprefixroute dynamic\n       valid_lft 2591948sec preferred_lft 604748sec\n    inet6 fe80::df3a:bcdd:727d:3ce5/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" noprefixroute\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": docker0: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue state UP group default\n    link/ether 02:42:93:d6:b6:11 brd ff:ff:ff:ff:ff:ff\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1/16 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:93ff:fed6:b611/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(": vethe8bdda4@if10: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue master docker0 state UP group default\n    link/ether "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("66")]),s._v(":ea:14:30:5f:2a brd ff:ff:ff:ff:ff:ff link-netnsid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    inet6 fe80::64ea:14ff:fe30:5f2a/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n       valid_lft forever preferred_lft forever\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 相较之前, 多了一张 vethe8bdda4 的虚拟网卡 vethe8bdda4@if10")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("尝试再启动一个容器")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 启动新的容器 tomcat02")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat02 -P striveonger/linux")]),s._v("\n51ba57c6b14428107555bded59edd60d4614db8737428751fa29a79a4fbbc880\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 查看容器网卡信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat02 ip addr")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(": eth0@if13: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue state UP group default\n    link/ether 02:42:ac:11:00:03 brd ff:ff:ff:ff:ff:ff link-netnsid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.3/16 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n       \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 查看宿主机的网卡信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip addr")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": ens33: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc pfifo_fast state UP group default qlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/ether 00:50:56:2a:86:16 brd ff:ff:ff:ff:ff:ff\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".144.104/24 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".144.255 scope global noprefixroute ens33\n       valid_lft forever preferred_lft forever\n    inet6 fd15:4ba5:5a2b:1008:fa0d:ec62:bc43:7b6c/64 scope global noprefixroute dynamic\n       valid_lft 2591956sec preferred_lft 604756sec\n    inet6 fe80::df3a:bcdd:727d:3ce5/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" noprefixroute\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": docker0: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue state UP group default\n    link/ether 02:42:93:d6:b6:11 brd ff:ff:ff:ff:ff:ff\n    inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1/16 brd "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:93ff:fed6:b611/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(": vethe8bdda4@if10: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue master docker0 state UP group default\n    link/ether "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("66")]),s._v(":ea:14:30:5f:2a brd ff:ff:ff:ff:ff:ff link-netnsid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    inet6 fe80::64ea:14ff:fe30:5f2a/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n       valid_lft forever preferred_lft forever\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(": vethd16564c@if12: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc noqueue master docker0 state UP group default\n    link/ether e6:6d:da:4b:f0:ef brd ff:ff:ff:ff:ff:ff link-netnsid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    inet6 fe80::e46d:daff:fe4b:f0ef/64 scope "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n       valid_lft forever preferred_lft forever\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以发现, 宿主机上又新增加了一块虚拟网卡 vethd16564c@if12")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br")])]),n("blockquote",[n("p",[s._v("我们发现, 容器中的网卡与宿主机中新增的网卡是成对出现的")]),s._v(" "),n("p",[n("code",[s._v("veth-pair")]),s._v(" 就是一对虚拟设备接口. 他们都是成对出现的. 一端连着协议,  一端彼此相连.")]),s._v(" "),n("p",[s._v("正因为有这个特性, "),n("code",[s._v("veth-pair")]),s._v(" 通常会充当桥梁, 连接各种虚拟的网络设备")])]),s._v(" "),n("p",[s._v("网络示意图:")]),s._v(" "),n("p",[n("img",{attrs:{src:t(622),alt:"image-20210624080741402"}})]),s._v(" "),n("h3",{attrs:{id:"回顾网络基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#回顾网络基础"}},[s._v("#")]),s._v(" 回顾网络基础")]),s._v(" "),n("h4",{attrs:{id:"子网掩码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#子网掩码"}},[s._v("#")]),s._v(" 子网掩码")]),s._v(" "),n("blockquote",[n("p",[s._v("定义: 它由"),n("code",[s._v("32位")]),s._v("二进制数组成, 通过运算来指定"),n("code",[s._v("IP")]),s._v("地址中标识网络地址的部分.")]),s._v(" "),n("p",[s._v("作用: 通过与"),n("code",[s._v("IP")]),s._v("地址进行"),n("code",[s._v("与运算")]),s._v(" 将某"),n("code",[s._v("IP")]),s._v("地址划分成==网络地址==和==主机地址==")])]),s._v(" "),n("h5",{attrs:{id:"算法举例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#算法举例"}},[s._v("#")]),s._v(" 算法举例")]),s._v(" "),n("blockquote",[n("p",[s._v("用上面"),n("strong",[s._v("ens33")]),s._v(" 网卡举例: "),n("code",[s._v("10.13.144.104/24")])]),s._v(" "),n("p",[n("code",[s._v("/24")]),s._v("代表, 子网掩码由前24位都是"),n("code",[s._v("1")]),s._v(", 后面都是0的数组成.")]),s._v(" "),n("p",[s._v("换算成二进制: "),n("code",[s._v("11111111.11111111.11111111.00000000")])]),s._v(" "),n("p",[s._v("换算成十进制: "),n("code",[s._v("255.255.255.0")])])]),s._v(" "),n("p",[s._v("把"),n("code",[s._v("IP: 10.13.144.104")]),s._v(" 换算成二进制: "),n("code",[s._v("00001010.00001101.10010000.01101000")])]),s._v(" "),n("ol",[n("li",[s._v("获取网络地址")])]),s._v(" "),n("p",[s._v("子网掩码 & IP => "),n("code",[s._v("00001010.00001101.10010000.00000000")]),s._v(" => "),n("code",[s._v("10.13.144.0")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("获取主机地址")])]),s._v(" "),n("p",[s._v("~子网掩码 & IP => "),n("code",[s._v("00000000.00000000.00000000.01101000")]),s._v(" => "),n("code",[s._v("0.0.0.104")])]),s._v(" "),n("blockquote",[n("p",[s._v("子网掩码先取反, 再跟"),n("code",[s._v("IP")]),s._v("进行与运算")])]),s._v(" "),n("h4",{attrs:{id:"子网规划"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#子网规划"}},[s._v("#")]),s._v(" 子网规划")]),s._v(" "),n("p",[s._v("可以通过上面的算法看出, "),n("code",[s._v("IP")]),s._v("中 "),n("code",[s._v("全0")]),s._v("或"),n("code",[s._v("全1")]),s._v("都有特殊的作用, 不能被用做"),n("code",[s._v("IP")])]),s._v(" "),n("h5",{attrs:{id:"a类网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#a类网络"}},[s._v("#")]),s._v(" A类网络")]),s._v(" "),n("blockquote",[n("p",[s._v("x.x.x.x/8")])]),s._v(" "),n("p",[s._v("A类网络: 第1位必须是0")]),s._v(" "),n("p",[s._v("网络号范围: "),n("code",[s._v("0000 0001 ~ 0111 1110")])]),s._v(" "),n("h5",{attrs:{id:"b类网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#b类网络"}},[s._v("#")]),s._v(" B类网络")]),s._v(" "),n("blockquote",[n("p",[s._v("x.x.x.x/16")])]),s._v(" "),n("p",[s._v("B类网络: 前两位固定为10")]),s._v(" "),n("h5",{attrs:{id:"c类网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#c类网络"}},[s._v("#")]),s._v(" C类网络")]),s._v(" "),n("blockquote",[n("p",[s._v("x.x.x.x/24")])]),s._v(" "),n("p",[s._v("C类网络: 前3位固定为110")]),s._v(" "),n("h3",{attrs:{id:"link"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#link"}},[s._v("#")]),s._v(" --link")]),s._v(" "),n("blockquote",[n("p",[s._v("使用场景: 我编写的一个微服务, 存在"),n("code",[s._v("A容器")]),s._v("中, 但是连接的数据库在"),n("code",[s._v("B容器")]),s._v("中, 如果依旧按照原有方式("),n("code",[s._v("IP:Port")]),s._v(")连接时, "),n("code",[s._v("B容器")]),s._v("意外重启后, "),n("code",[s._v("IP")]),s._v("就会发生改变.")]),s._v(" "),n("p",[s._v("所以我们是否可以尝试用"),n("code",[s._v("容器名")]),s._v(", 代替"),n("code",[s._v("IP")]),s._v("进行连接访问.")])]),s._v(" "),n("p",[s._v("清空容器后, 用"),n("code",[s._v("--link")]),s._v("重新启动容器")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动tomcat01, tomcat02 容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat01 -P striveonger/tomcat")]),s._v("\nbdc1650b008c1a22fbe2fa79e9bc1d05df4b4abe8a76de2077d1daa3b5b5a1b7\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat02 -P --link tomcat01 striveonger/tomcat")]),s._v("\n2d07bce14694ec1b9d1f080e3759de7ef5b90b15ba307da6e06aea99b2e3e0be\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试用 tomcat02 ping tomcat01")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat02 ping tomcat01")]),s._v("\nPING tomcat01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.987")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.119")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.117")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.117")]),s._v(" ms\n^C\n--- tomcat01 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" packets transmitted, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" received, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss, "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" 3004ms\nrtt min/avg/max/mdev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.117")]),s._v("/0.335/0.987/0.376 ms\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再次尝试用 tomcat01 ping tomcat02")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat01 ping tomcat02")]),s._v("\nping: tomcat02: Name or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" not known\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看tomcat02的hosts文件, 可以看到加入了tomcat01 当前的IP...所以可以ping通")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat02 cat /etc/hosts")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\tlocalhost\n::1\tlocalhost ip6-localhost ip6-loopback\nfe00::0\tip6-localnet\nff00::0\tip6-mcastprefix\nff02::1\tip6-allnodes\nff02::2\tip6-allrouters\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2\ttomcat01 bdc1650b008c\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.3\t2d07bce14694\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看tomcat01的hosts文件, 只有自己IP...所以ping不通 tomcat02")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat01 cat /etc/hosts")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\tlocalhost\n::1\tlocalhost ip6-localhost ip6-loopback\nfe00::0\tip6-localnet\nff00::0\tip6-mcastprefix\nff02::1\tip6-allnodes\nff02::2\tip6-allrouters\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2\tbdc1650b008c\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("blockquote",[n("p",[s._v("但是, 这种方式, 只解决了使用容器名访问的问题. 但无法解决"),n("code",[s._v("IP")]),s._v("变更的问题. 如下:")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除原tomcat01容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rm -f tomcat01")]),s._v("\ntomcat01\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动一个名为tomcat01的容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat01 -P striveonger/tomcat")]),s._v("\nf99a641276721d6b3a20b5e8c461d704b05fc0bdc357534186d4c227de59b62f\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发现tomcat02 ping 不通 tomcat01了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat02 ping tomcat01")]),s._v("\nError response from daemon: Cannot "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" to a non running container: /tomcat01 AS /tomcat02/tomcat01\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("img",{attrs:{src:t(623),alt:"image-20210624222656288"}})]),s._v(" "),n("p",[n("code",[s._v("--link")]),s._v(" 是通过 docker0 来桥接访问的.")]),s._v(" "),n("p",[s._v("docker0 的问题: 不支持容器名连接访问.")]),s._v(" "),n("h4",{attrs:{id:"查看网络详情"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看网络详情"}},[s._v("#")]),s._v(" 查看网络详情")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network ls")]),s._v("\nNETWORK ID     NAME      DRIVER    SCOPE\n88e8f49fe8ef   bridge    bridge    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n312daa7eaf6d   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nf8c2701ef930   none      null      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network inspect 88e8f49fe8ef")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"88e8f49fe8efac5e95e0a3437c62d87f620614d4d52e1a409e17f8bdb7cc00c4"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-23T20:47:41.898671442+08:00"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EnableIPv6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAM"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Subnet"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.0/16"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Internal"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Attachable"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ingress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigFrom"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigOnly"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Containers"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2d07bce14694ec1b9d1f080e3759de7ef5b90b15ba307da6e06aea99b2e3e0be"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tomcat02"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3ee3caffa4c8aa02515730ff71884610c709cab0a790a41cc97a985a362974c3"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:03"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv4Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.3/16"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f99a641276721d6b3a20b5e8c461d704b05fc0bdc357534186d4c227de59b62f"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tomcat01"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"316f38ffa908d5e652d5c0b3dd442dba8a3d059d4a594468e501152944c2d36f"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:02"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv4Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2/16"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.default_bridge"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.enable_icc"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.enable_ip_masquerade"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.host_binding_ipv4"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker0"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.driver.mtu"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1500"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br")])]),n("h3",{attrs:{id:"自定义网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义网络"}},[s._v("#")]),s._v(" 自定义网络")]),s._v(" "),n("h4",{attrs:{id:"网络模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络模式"}},[s._v("#")]),s._v(" 网络模式")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("bridg")]),s._v(" : 桥接模式")]),s._v(" "),n("li",[n("code",[s._v("none")]),s._v(": 不配置网络")]),s._v(" "),n("li",[n("code",[s._v("host")]),s._v(": 和宿主机共享网络")]),s._v(" "),n("li",[n("code",[s._v("container")]),s._v(": 容器间网络连通(用的少)")])]),s._v(" "),n("blockquote",[n("p",[s._v("一般, 大多数还是会选择桥接模式的网络")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动时, 默认会带着 --net bridge 参数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat01 --net bridge -P striveonger/tomcat")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过ip, 可以看到 bridge 其实是docker0网卡")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network inspect bridge")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"88e8f49fe8efac5e95e0a3437c62d87f620614d4d52e1a409e17f8bdb7cc00c4"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-23T20:47:41.898671442+08:00"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EnableIPv6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAM"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Subnet"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.0/16"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Internal"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Attachable"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ingress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigFrom"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigOnly"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Containers"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.default_bridge"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.enable_icc"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.enable_ip_masquerade"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.host_binding_ipv4"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.bridge.name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker0"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.network.driver.mtu"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1500"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("h4",{attrs:{id:"创建自己的网卡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建自己的网卡"}},[s._v("#")]),s._v(" 创建自己的网卡")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建自己的网卡")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network create --driver bridge --subnet 10.13.145.0/24 --gateway 10.13.145.9 mova")]),s._v("\n870cc7746033626300c8283b8733e621fe6536afd86bbfd0cfde345d1cfd9df2\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看网卡列表")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network ls")]),s._v("\nNETWORK ID     NAME      DRIVER    SCOPE\n88e8f49fe8ef   bridge    bridge    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n312daa7eaf6d   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n870cc7746033   mova      bridge    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nf8c2701ef930   none      null      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看网卡详情")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network inspect mova")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mova"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"870cc7746033626300c8283b8733e621fe6536afd86bbfd0cfde345d1cfd9df2"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-25T02:00:25.842200676+08:00"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EnableIPv6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAM"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Subnet"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.0/24"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.9"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Internal"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Attachable"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ingress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigFrom"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigOnly"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Containers"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br")])]),n("h4",{attrs:{id:"启动容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),n("blockquote",[n("p",[s._v("配置了自己网卡的容器")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动两个容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat-mova-01 --net mova -P striveonger/tomcat")]),s._v("\nae5a73e4f78cb6f1ea0b14b6adc63ce5f6a59755470d2339a32df1fca27133fe\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat-mova-02 --net mova -P striveonger/tomcat")]),s._v("\nc431ee3af626f530c24fc1e37699dfca1544d5092ea9a31aabfc809d0e11e1a6\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看网卡详情")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network inspect mova")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mova"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"870cc7746033626300c8283b8733e621fe6536afd86bbfd0cfde345d1cfd9df2"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-25T02:00:25.842200676+08:00"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EnableIPv6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAM"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Subnet"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.0/24"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.9"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Internal"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Attachable"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ingress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigFrom"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigOnly"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Containers"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ae5a73e4f78cb6f1ea0b14b6adc63ce5f6a59755470d2339a32df1fca27133fe"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tomcat-mova-01"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a6a627e7398cac5c30649ff499b93ccf338b7150da8aa25d6e83548171308f40"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:0a:0d:91:01"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv4Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.1/24"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c431ee3af626f530c24fc1e37699dfca1544d5092ea9a31aabfc809d0e11e1a6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tomcat-mova-02"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e0156c719695dd6a2f15b5d75980204dfab49e28b064090bfa0eb5c75f55e435"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:0a:0d:91:02"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv4Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.2/24"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试Ping")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat-mova-01 ping 10.13.145.2")]),s._v("\nPING "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.310")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.179")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.116")]),s._v(" ms\n^C\n--- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" packets transmitted, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" received, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss, "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" 2001ms\nrtt min/avg/max/mdev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.116")]),s._v("/0.201/0.310/0.082 ms\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat-mova-01 ping tomcat-mova-02")]),s._v("\nPING tomcat-mova-02 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-mova-02.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.225")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-mova-02.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.179")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-mova-02.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.129")]),s._v(" ms\n^C\n--- tomcat-mova-02 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" packets transmitted, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" received, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss, "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" 2002ms\nrtt min/avg/max/mdev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.129")]),s._v("/0.177/0.225/0.042 ms\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br")])]),n("h3",{attrs:{id:"容器间的互通"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器间的互通"}},[s._v("#")]),s._v(" 容器间的互通")]),s._v(" "),n("blockquote",[n("p",[s._v("连接一个容器到一个网络")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 新创建两个 bridge 网络下的容器.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat01 -P striveonger/tomcat")]),s._v("\na364ec702d50c49e427356ea486bfe44760880380869d246d264de44cf25aa72\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name tomcat02 -P striveonger/tomcat")]),s._v("\nd6bfa5f954b0ccd1df3abc90f57ec0d2b3333c7945582a402f50f4a4e0f36a86\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE               COMMAND    CREATED          STATUS          PORTS     NAMES\nd6bfa5f954b0   striveonger/tomcat             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" seconds ago    Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" seconds              tomcat02\na364ec702d50   striveonger/tomcat             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" seconds ago   Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" seconds             tomcat01\nc431ee3af626   striveonger/tomcat             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" hours ago     Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" hours               tomcat-mova-02\nae5a73e4f78c   striveonger/tomcat             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" hours ago     Up "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(" hours               tomcat-mova-01\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 测试, tomcat-mova-01 ping tomcat01")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat-mova-01 ping tomcat01")]),s._v("\nping: tomcat01: Name or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" not known\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 把tomcat01加入到 mova 网络中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network connect mova tomcat01")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4. 再次测试")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat-mova-01 ping tomcat01")]),s._v("\nPING tomcat01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.508")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.412")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat01.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.173")]),s._v(" ms\n^C\n--- tomcat01 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" packets transmitted, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" received, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss, "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" 2004ms\nrtt min/avg/max/mdev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.173")]),s._v("/0.364/0.508/0.141 ms\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -ti tomcat01 ping tomcat-mova-01")]),s._v("\nPING tomcat-mova-01 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-mova-01.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.232")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-mova-01.mova "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".145.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.223")]),s._v(" ms\n^C\n--- tomcat-mova-01 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" packets transmitted, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" received, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss, "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" 1002ms\nrtt min/avg/max/mdev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.223")]),s._v("/0.227/0.232/0.015 ms\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5. 查看tomcat01的变化")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect tomcat01")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a364ec702d50c49e427356ea486bfe44760880380869d246d264de44cf25aa72"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-26T06:05:08.121964945Z"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Path"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkSettings"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bridge"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SandboxID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0167284c656895e0b2f3984c71ed4ef9a1427f9c754fde6ee41a4ac619d26e0e"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HairpinMode"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LinkLocalIPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LinkLocalIPv6PrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ports"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8080/tcp"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostIp"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v(",\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostPort"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"49162"')]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostIp"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"::"')]),s._v(",\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostPort"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"49162"')]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SandboxKey"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/run/docker/netns/0167284c6568"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPAddresses"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPv6Addresses"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bffe1e372f11148ac99e50c90cb5ec18a24a0b789b545685dc9ea514da314009"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.1"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:02"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Networks"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Links"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Aliases"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"88e8f49fe8efac5e95e0a3437c62d87f620614d4d52e1a409e17f8bdb7cc00c4"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bffe1e372f11148ac99e50c90cb5ec18a24a0b789b545685dc9ea514da314009"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.1"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:02"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DriverOpts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这就明显了, 直接给tomcat加了一块mova的网卡")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mova"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Links"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Aliases"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a364ec702d50"')]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"870cc7746033626300c8283b8733e621fe6536afd86bbfd0cfde345d1cfd9df2"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"af14d32b78bcd4cbd7dfc08c164dc607acde4739425d4912bf0632f86ebe1226"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.9"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.145.3"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:0a:0d:91:03"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DriverOpts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br")])]),n("h3",{attrs:{id:"搭建redis的集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建redis的集群"}},[s._v("#")]),s._v(" 搭建Redis的集群")]),s._v(" "),n("blockquote",[n("p",[s._v("切片的方式, 来搭建集群")])]),s._v(" "),n("h4",{attrs:{id:"创建集群的网卡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建集群的网卡"}},[s._v("#")]),s._v(" 创建集群的网卡")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建集群的网卡")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network create --driver bridge --subnet 10.13.146.0/24 --gateway 10.13.146.9 redis")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看网卡的状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network inspect redis")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ad0e9feb33359d7b1945c70a165f94a17356b81c13c64627dfe99f51dcf9c5e3"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-26T20:22:57.328928215+08:00"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EnableIPv6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAM"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Subnet"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.146.0/24"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.13.146.9"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Internal"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Attachable"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ingress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigFrom"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigOnly"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Containers"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("h4",{attrs:{id:"创建redis容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建redis容器"}},[s._v("#")]),s._v(" 创建Redis容器")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建Redis配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim create_conf.sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("port")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /root/redis/node-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /root/redis/node-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf/redis.conf\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" EOF "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /root/redis/node-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf/redis.conf\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\ncluster-enabled "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\ncluster-config-file nodes.conf\ncluster-node-timeout "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\ncluster-announce-ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.14")]),s._v(".146.1"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("\ncluster-announce-port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\ncluster-announce-bus-port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16379")]),s._v("\nappendonly "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nEOF\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sh create_conf.sh")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看创建后的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n-rw-r--r--. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":50 create_conf.sh\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 node-1\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 node-2\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 node-3\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 node-4\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 node-5\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 node-6\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -p 6371:6379 -p 16371:16379 --name redis-1 \\")]),s._v("\n-v /root/redis/node-1/data:/data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /root/redis/node-1/conf/redis.conf:/etc/redis/redis.conf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".146.11 redis:5.0.12 redis-server /etc/redis/redis.conf\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -p 6372:6379 -p 16372:16379 --name redis-2 \\")]),s._v("\n-v /root/redis/node-2/data:/data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /root/redis/node-2/conf/redis.conf:/etc/redis/redis.conf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".146.12 redis:5.0.12 redis-server /etc/redis/redis.conf\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -p 6373:6379 -p 16373:16379 --name redis-3 \\")]),s._v("\n-v /root/redis/node-3/data:/data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /root/redis/node-3/conf/redis.conf:/etc/redis/redis.conf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".146.13 redis:5.0.12 redis-server /etc/redis/redis.conf\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -p 6374:6379 -p 16374:16379 --name redis-4 \\")]),s._v("\n-v /root/redis/node-4/data:/data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /root/redis/node-4/conf/redis.conf:/etc/redis/redis.conf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".146.14 redis:5.0.12 redis-server /etc/redis/redis.conf\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -p 6375:6379 -p 16375:16379 --name redis-5 \\")]),s._v("\n-v /root/redis/node-5/data:/data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /root/redis/node-5/conf/redis.conf:/etc/redis/redis.conf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".146.15 redis:5.0.12 redis-server /etc/redis/redis.conf\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -p 6376:6379 -p 16376:16379 --name redis-6 \\")]),s._v("\n-v /root/redis/node-6/data:/data "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /root/redis/node-6/conf/redis.conf:/etc/redis/redis.conf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.13")]),s._v(".146.16 redis:5.0.12 redis-server /etc/redis/redis.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br")])]),n("p",[n("img",{attrs:{src:t(624),alt:"image-20210626214238527"}})]),s._v(" "),n("h4",{attrs:{id:"创建集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建集群"}},[s._v("#")]),s._v(" 创建集群")]),s._v(" "),n("p",[n("img",{attrs:{src:t(625),alt:"image-20210626225528624"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@localhost redis]# docker exec -ti redis-1 /bin/bash\n\nredis-cli --cluster create \\\n10.13.146.11:6379 \\\n10.13.146.12:6379 \\\n10.13.146.13:6379 \\\n10.13.146.14:6379 \\\n10.13.146.15:6379 \\\n10.13.146.16:6379 \\\n--cluster-replicas 1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"docker-compose"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[s._v("#")]),s._v(" Docker Compose")]),s._v(" "),n("h3",{attrs:{id:"简单了解定义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简单了解定义"}},[s._v("#")]),s._v(" 简单了解定义")]),s._v(" "),n("p",[s._v("Docker Compose是用来管理容器工具. 可以轻松的定义和运行多个容器.")]),s._v(" "),n("blockquote",[n("p",[s._v("官方定义:")]),s._v(" "),n("p",[s._v("Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application’s services. Then, with a single command, you create and start all the services from your configuration. To learn more about all the features of Compose, see "),n("a",{attrs:{href:"https://docs.docker.com/compose/#features",target:"_blank",rel:"noopener noreferrer"}},[s._v("the list of features"),n("OutboundLink")],1),s._v(".")]),s._v(" "),n("p",[s._v("Compose works in all environments: production, staging, development, testing, as well as CI workflows. You can learn more about each case in "),n("a",{attrs:{href:"https://docs.docker.com/compose/#common-use-cases",target:"_blank",rel:"noopener noreferrer"}},[s._v("Common Use Cases"),n("OutboundLink")],1),s._v(".")]),s._v(" "),n("p",[s._v("Using Compose is basically a three-step process:")]),s._v(" "),n("ol",[n("li",[s._v("Define your app’s environment with a "),n("code",[s._v("Dockerfile")]),s._v(" so it can be reproduced anywhere.")]),s._v(" "),n("li",[s._v("Define the services that make up your app in "),n("code",[s._v("docker-compose.yml")]),s._v(" so they can be run together in an isolated environment.")]),s._v(" "),n("li",[s._v("Run "),n("code",[s._v("docker compose up")]),s._v(" and the "),n("a",{attrs:{href:"https://docs.docker.com/compose/cli-command/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker compose command"),n("OutboundLink")],1),s._v(" starts and runs your entire app. You can alternatively run "),n("code",[s._v("docker-compose up")]),s._v(" using the docker-compose binary.")])])]),s._v(" "),n("h4",{attrs:{id:"compose-中重要的概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#compose-中重要的概念"}},[s._v("#")]),s._v(" Compose 中重要的概念")]),s._v(" "),n("ul",[n("li",[s._v("服务 services: 容器, 应用(MySQL, Redis, Tomcat, 自己的写的SpringBoot应用)")]),s._v(" "),n("li",[s._v("项目 project: 一组关联的容器. 博客(web, mysql)")])]),s._v(" "),n("h3",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("下载")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" -o /usr/local/bin/docker-compose\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("设置权限")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("测试")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("$ ~ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  docker-compose --version\ndocker-compose version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.29")]),s._v(".2, build 5becea4c\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:t(626),alt:"image-20210627150958785"}})]),s._v(" "),n("h3",{attrs:{id:"初体验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初体验"}},[s._v("#")]),s._v(" 初体验")]),s._v(" "),n("blockquote",[n("p",[s._v("还是跟着官方的"),n("a",{attrs:{href:"https://docs.docker.com/compose/gettingstarted/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Geting Started"),n("OutboundLink")],1),s._v("走吧.....")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(627),alt:"image-20210627152849953"}})]),s._v(" "),n("blockquote",[n("p",[s._v("根据官网, 去尝试一个HelloWorld")])]),s._v(" "),n("h4",{attrs:{id:"基本步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本步骤"}},[s._v("#")]),s._v(" 基本步骤")]),s._v(" "),n("ol",[n("li",[s._v("编写应用(上例中的"),n("code",[s._v("app.py")]),s._v(", 也可以我们自己写的SpringBoot服务)")]),s._v(" "),n("li",[s._v("创建"),n("code",[s._v("Dockerfile")]),s._v(", 将服务打包成镜像")]),s._v(" "),n("li",[s._v("编写"),n("code",[s._v("docker-compose.yml")]),s._v("文件(定义整个服务所需环境, 创建网络, 编排容器), 完整的上线服务.\n"),n("ol",[n("li",[s._v("创建网络")]),s._v(" "),n("li",[s._v("执行"),n("code",[s._v("docker-compose.yml")]),s._v(" "),n("ul",[n("li",[s._v("上例中的"),n("code",[s._v("web")]),s._v("  (==用Dockerfile来build==)")]),s._v(" "),n("li",[s._v("上例中的"),n("code",[s._v("redis")]),s._v(" (==直接运行了现成的镜像==)")])])]),s._v(" "),n("li",[s._v("启动服务...")])])]),s._v(" "),n("li",[s._v("启动 "),n("code",[s._v("compose")]),s._v(" 项目  "),n("code",[s._v("docker-compose up")])])]),s._v(" "),n("p",[n("img",{attrs:{src:t(628),alt:"image-20210627154835604"}})]),s._v(" "),n("h3",{attrs:{id:"查看-docker-compose-做的变更"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看-docker-compose-做的变更"}},[s._v("#")]),s._v(" 查看 Docker Compose 做的变更")]),s._v(" "),n("ol",[n("li",[s._v("访问一下试试....")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(629),alt:"image-20210627155154382"}})]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("我们看到, 新增了两个镜像. 其中"),n("code",[s._v("hello_web")]),s._v("是通过"),n("code",[s._v("Dockerfile")]),s._v(" build生成的")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(630),alt:"image-20210627155510125"}})]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("我们再来看一下, 启动的容器")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(631),alt:"image-20210627155854472"}})]),s._v(" "),n("p",[s._v("可以看到, 容器的命名规则是: "),n("code",[s._v("文件夹名_服务名_num")]),s._v("...服务有"),n("code",[s._v("1")]),s._v("就有"),n("code",[s._v("2")]),s._v(".... "),n("code",[s._v("_num")]),s._v(" 表示服务的副本数量...做服务的集群使用.")]),s._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[s._v("我们再来看下, 网络环境, 做了哪些变更...")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(632),alt:"image-20210627160650093"}})]),s._v(" "),n("p",[s._v("新增加了一个"),n("code",[s._v("hello_default")]),s._v("的网络(像极了"),n("code",[s._v("文件夹名_default")]),s._v("). 项目中的容器都在同一个网络下, 这样就可以用容器名, 来访问了.")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从网卡的详情中, 也可以看到容器归属于这个网络下")]),s._v("\n$ ~/development/workspace/docker/compose/hello "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker network inspect hello_default\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello_default"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"27fbfdab0a2b06175f8010b0b19be6e3b0abf5f56618731d9f35789babc021b2"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-06-27T07:27:59.973145878Z"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EnableIPv6"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAM"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Subnet"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.18.0.0/16"')]),s._v(",\n                    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.18.0.1"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Internal"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Attachable"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ingress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigFrom"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConfigOnly"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Containers"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0205fa03cae0105d0bad05a26392b753419974cf8cd3144939a55fb8cfc2b9c4"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello_redis_1"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3463b677992350fcbd48cd47ff0f669e125ad58d7544bcaeb34ece7505e96756"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:12:00:03"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv4Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.18.0.3/16"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3c2cc20c4fe7d409d1f8337e2301c297959a77d79fae3aa7d05108a4d9a73ed4"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello_web_1"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e2036e79bc5350a8a31333a9bae0eee036ab3cb0ad6bf36bbe1e17be058b2821"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:12:00:02"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv4Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.18.0.2/16"')]),s._v(",\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Address"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.compose.network"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.compose.project"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(",\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.docker.compose.version"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.29.2"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("测试网络")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(633),alt:"image-20210627162233792"}})]),s._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[s._v("// TODO: 一会儿再研究下")])]),s._v(" "),n("h3",{attrs:{id:"yaml-规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yaml-规则"}},[s._v("#")]),s._v(" yaml 规则")]),s._v(" "),n("blockquote",[n("p",[s._v("docker-compose.yml 才是核心....关于yaml的"),n("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1),s._v("在这里哦~")])]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose.yml 只有3层")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. docker-compose.yml 与 docker对应的版本(官方有给出对照关系)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("web")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务名")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 docker镜像")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("images")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xxx\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xxx\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xxx\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 其他配置: 网络/卷, 全局配置...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("官网是个好东西...要用的, "),n("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/compose-file-v3/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),n("OutboundLink")],1),s._v("都可以找到")]),s._v(" "),n("p",[n("img",{attrs:{src:t(634),alt:"image-20210627164244808"}})]),s._v(" "),n("blockquote",[n("p",[s._v("感觉 "),n("code",[s._v("docker-compose.yml")]),s._v("写好了, 就没"),n("code",[s._v("Dockerfile")]),s._v("什么事了")])]),s._v(" "),n("h2",{attrs:{id:"docker-swarm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-swarm"}},[s._v("#")]),s._v(" Docker Swarm")]),s._v(" "),n("h2",{attrs:{id:"ci-cd-jenkins-持续部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ci-cd-jenkins-持续部署"}},[s._v("#")]),s._v(" CI/CD: Jenkins(持续部署)")])])}),[],!1,null,null,null);a.default=e.exports}}]);